---
import Select from 'fulldev-ui/components/Select.astro'
---

{
  Astro.props.locales && (
    <Select
      name="locale-switcher"
      options={Astro.props.locales}
      value={Astro.props.lang as string}
      placeholder={Astro.props.lang as string}
    />
  )
}

<script>
  const select = document.querySelector('.theme-switcher select')
  select?.addEventListener('change', (event) => {
    if (event.target instanceof HTMLSelectElement) {
      const target = event.target
      const selectedLocale = target.value
      const currentUrl = new URL(window.location.href)
      currentUrl.pathname = '/' + selectedLocale + currentUrl.pathname
      window.location.href = currentUrl.toString()
    }
  })
</script>
